/*
 * B2Bprotocol.c
 *
 *  Created on: Nov 21, 2016
 *      Author: Chinmay Shah
 */
#include <../B2Bprotocol/B2Bprotocol.h>





unsigned char * formpacket(packet sendPack){
	unsigned char sendMessage[MAXPACKETSIZE];


	sprintf(sendMessage,"%c|%d|%d|%d|%d|%s|%s|%c|",
				START_BYTE,
				sendPack.commandType,
				sendPack.interfaceType,
				sendPack.subinterfaceType,
				sendPack.interfaceID,
				sendPack.destnIPAddress,
				sendPack.srcIPAddress,
				sendPack.data,
				STOP_BYTE
			);//convert into a single packet



return sendMessage;

}


packet splitPacket(char inputMessage){

	char startByte,stopByte;
	packet splitPacket;
	sscanf(inputMessage,"%c|%d|%d|%d|%d|%s|%s|%c|",
					&startByte,
					splitPacket.commandType,
					splitPacket.interfaceType,
					splitPacket.subinterfaceType,
					splitPacket.interfaceID,
					splitPacket.destnIPAddress,
					splitPacket.srcIPAddress,
					splitPacket.data,
					&stopByte
				);//convert into a single packet

	return splitPacket;
}






